<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Assistant Scolaire</title>
<style>
body {margin:0;font-family:Arial,sans-serif;background:url('https://img.freepik.com/vecteurs-libre/fond-bulles-eau-brillante-fond-bleu_1017-26353.jpg') no-repeat center center fixed;background-size:cover;color:#fff;}
header {padding:1rem;background:rgba(0,0,0,0.5);text-align:center;font-size:1.5rem;font-weight:bold;}
nav {display:flex;flex-wrap:wrap;justify-content:space-around;padding:0.5rem;background:rgba(0,0,0,0.4);}
nav button {flex:1 1 30%;margin:0.5rem;padding:0.8rem;font-size:1rem;border:none;border-radius:8px;background:#1e90ff;color:#fff;}
section {padding:1rem;display:none;background:rgba(0,0,0,0.4);min-height:80vh;}
h2{text-align:center;}
button.action-btn {padding:0.5rem 1rem;margin:0.3rem;border:none;border-radius:5px;background:#32cd32;color:#fff;}
ul {list-style:none;padding:0;}
li {background:rgba(255,255,255,0.1);margin:0.5rem 0;padding:0.5rem;border-radius:5px;cursor:pointer;}
</style>
</head>
<body>
<header>Assistant Scolaire</header>
<nav>
<button onclick="showSection('quizHome')">Quiz</button>
<button onclick="showSection('flashHome')">Flashcards</button>
</nav>

<!-- QUIZ -->
<section id="quizHome">
<h2>Choisis la matière</h2>
<div id="quizSubjects"></div>
</section>

<section id="quizListSection">
<h2 id="quizListTitle"></h2>
<button class="action-btn" onclick="createQuiz()">Créer nouveau quiz</button>
<ul id="quizList"></ul>
<button class="action-btn" onclick="showSection('quizHome')">Retour</button>
</section>

<section id="quizCreateSection">
<h2>Créer Quiz</h2>
<input type="text" id="quizTitle" placeholder="Titre du quiz">
<div id="quizQuestionsContainer"></div>
<button class="action-btn" onclick="addQuestion()">Ajouter question</button>
<button class="action-btn" onclick="saveQuiz()">Sauvegarder</button>
<button class="action-btn" onclick="showQuizList()">Annuler</button>
</section>

<!-- FLASHCARDS -->
<section id="flashHome">
<h2>Choisis la matière</h2>
<div id="flashSubjects"></div>
</section>

<section id="flashListSection">
<h2 id="flashListTitle"></h2>
<button class="action-btn" onclick="createFlash()">Créer nouveau jeu</button>
<ul id="flashList"></ul>
<button class="action-btn" onclick="showSection('flashHome')">Retour</button>
</section>

<section id="flashCreateSection">
<h2>Créer Flashcards</h2>
<input type="text" id="flashTitle" placeholder="Titre du jeu de flashcards">
<div id="flashContainer"></div>
<button class="action-btn" onclick="addFlashcard()">Ajouter flashcard</button>
<button class="action-btn" onclick="saveFlash()">Sauvegarder</button>
<button class="action-btn" onclick="showFlashList()">Annuler</button>
</section>

<script>
// NAVIGATION
function showSection(id){document.querySelectorAll('section').forEach(sec=>sec.style.display='none');document.getElementById(id).style.display='block';}

// Matières
const subjects=['Français','Maths','Sciences','Histoire','Anglais','Technologie'];

// -------------------- QUIZ --------------------
let currentSubject='',currentQuizList=[],currentQuiz=[];

// Afficher matières pour quiz
const quizSubjectsDiv=document.getElementById('quizSubjects');
subjects.forEach(sub=>{
  const btn=document.createElement('button'); btn.innerText=sub;
  btn.className='action-btn';
  btn.onclick=()=>{currentSubject=sub;showQuizList();};
  quizSubjectsDiv.appendChild(btn);
});

function showQuizList(){
  showSection('quizListSection');
  document.getElementById('quizListTitle').innerText=`Quiz: ${currentSubject}`;
  const stored = JSON.parse(localStorage.getItem('quizzes'))||{};
  currentQuizList=stored[currentSubject]||[];
  displayQuizList();
}
function displayQuizList(){
  const ul=document.getElementById('quizList'); ul.innerHTML='';
  currentQuizList.forEach((q,i)=>{
    const li=document.createElement('li'); li.innerText=q.title;
    li.onclick=()=>{startQuiz(i)};
    const delBtn=document.createElement('button'); delBtn.innerText='❌'; delBtn.style.marginLeft='10px';
    delBtn.onclick=(e)=>{e.stopPropagation(); deleteQuiz(i);};
    li.appendChild(delBtn);
    ul.appendChild(li);
  });
}
function createQuiz(){
  currentQuiz=[];document.getElementById('quizTitle').value='';document.getElementById('quizQuestionsContainer').innerHTML=''; showSection('quizCreateSection');}
function addQuestion(){
  const container=document.getElementById('quizQuestionsContainer');
  const div=document.createElement('div');
  div.innerHTML=`<input placeholder="Question"><br>
    <input placeholder="Option 1">
    <input placeholder="Option 2">
    <input placeholder="Option 3">
    <input placeholder="Option 4">
    <select>
      <option value="0">Option 1</option>
      <option value="1">Option 2</option>
      <option value="2">Option 3</option>
      <option value="3">Option 4</option>
    </select>`;
  container.appendChild(div);
}
function saveQuiz(){
  const title=document.getElementById('quizTitle').value;
  const container=document.getElementById('quizQuestionsContainer');
  const questions=[];
  for(let div of container.children){
    const q=div.querySelectorAll('input');
    const sel=div.querySelector('select');
    questions.push({q:q[0].value, opts:[q[1].value,q[2].value,q[3].value,q[4].value], correct:parseInt(sel.value)});
  }
  if(!title||questions.length===0){alert('Remplis tout');return;}
  const stored = JSON.parse(localStorage.getItem('quizzes'))||{};
  if(!stored[currentSubject]) stored[currentSubject]=[];
  stored[currentSubject].push({title,questions});
  localStorage.setItem('quizzes',JSON.stringify(stored));
  showQuizList();
}
function deleteQuiz(i){if(confirm('Supprimer ce quiz ?')){currentQuizList.splice(i,1); const stored=JSON.parse(localStorage.getItem('quizzes')); stored[currentSubject]=currentQuizList; localStorage.setItem('quizzes',JSON.stringify(stored)); displayQuizList();}}
function startQuiz(i){alert('Ici le quiz démarre pour la question '+i+' (à compléter si tu veux le lancer vraiment)');}

// -------------------- FLASHCARDS --------------------
let currentFlashList=[],currentFlash=[],currentFlashSubject='';

// Afficher matières pour flashcards
const flashSubjectsDiv=document.getElementById('flashSubjects');
subjects.forEach(sub=>{
  const btn=document.createElement('button'); btn.innerText=sub;
  btn.className='action-btn';
  btn.onclick=()=>{currentFlashSubject=sub;showFlashList();};
  flashSubjectsDiv.appendChild(btn);
});
function showFlashList(){
  showSection('flashListSection');
  document.getElementById('flashListTitle').innerText=`Flashcards: ${currentFlashSubject}`;
  const stored=JSON.parse(localStorage.getItem('flashcards'))||{};
  currentFlashList=stored[currentFlashSubject]||[];
  const ul=document.getElementById('flashList'); ul.innerHTML='';
  currentFlashList.forEach((f,i)=>{
    const li=document.createElement('li'); li.innerText=f.title;
    li.onclick=()=>{viewFlash(i)};
    const delBtn=document.createElement('button'); delBtn.innerText='❌'; delBtn.style.marginLeft='10px';
    delBtn.onclick=(e)=>{e.stopPropagation(); deleteFlash(i);};
    li.appendChild(delBtn);
    ul.appendChild(li);
  });
}
function createFlash(){currentFlash=[];document.getElementById('flashTitle').value='';document.getElementById('flashContainer').innerHTML=''; showSection('flashCreateSection');}
function addFlashcard(){
  const question=prompt('Question ?'); const answer=prompt('Réponse ?'); if(question&&answer){currentFlash.push({question,answer}); alert('Ajouté');}}
function saveFlash(){
  const title=document.getElementById('flashTitle').value;
  if(!title||currentFlash.length===0){alert('Remplis tout'); return;}
  const stored=JSON.parse(localStorage.getItem('flashcards'))||{};
  if(!stored[currentFlashSubject]) stored[currentFlashSubject]=[];
  stored[currentFlashSubject].push({title,flashcards:currentFlash});
  localStorage.setItem('flashcards',JSON.stringify(stored));
  showFlashList();
}
function deleteFlash(i){if(confirm('Supprimer ce jeu ?')){currentFlashList.splice(i,1); const stored=JSON.parse(localStorage.getItem('flashcards')); stored[currentFlashSubject]=currentFlashList; localStorage.setItem('flashcards',JSON.stringify(stored)); showFlashList();}}
function viewFlash(i){alert('Ici on afficherait le jeu de flashcards: '+currentFlashList[i].title);}
</script>
</body>
</html>
